<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>8-1</title>
		<link rel="stylesheet" type="text/css" href="css/scroll.css"/>
	</head>
	<body>
		<div id="out" class="clearfix">
			<div id="text">
				<div id="content">故事发生在《加勒比海盗3：世界的尽头》沉船湾之战20年后。 男孩亨利（布兰顿·思怀兹 Brenton Thwaites 饰）随英国海军出航寻找被聚魂棺诅咒的父亲“深海阎王”威尔·特纳（奥兰多·布鲁姆 Orlando Bloom 饰），却在百慕大三角遭遇被解封的亡灵萨拉查船长（哈维尔·巴登 Javier Bardem 饰）。获取自由的萨拉查屠尽加勒比海盗，征服了整个海域，手刃了“黑胡子”爱德华·蒂奇（伊恩·麦柯肖恩 Ian McShane 饰）的里海海盗王赫克托·巴博萨船长（杰弗里·拉什 Geoffrey Rush 饰）在女巫Haifaa Meni(格什菲·法拉哈尼 Golshifteh Farahani 饰)口中得知了萨拉查的真实目的：为寻找他的宿敌杰克船长（约翰尼·德普 Johnny Depp 饰）。海盗的命运皆压在落魄的老杰克被封印的黑珍珠号，以及天文学家卡琳娜·史密斯（卡雅·斯考达里奥 Kaya Scodelario 饰）口中的远古三叉戟上。hahahahahahahahhahahahahahahahahahhaha故事发生在《加勒比海盗3：世界的尽头》沉船湾之战20年后。 男孩亨利（布兰顿·思怀兹 Brenton Thwaites 饰）随英国海军出航寻找被聚魂棺诅咒的父亲“深海阎王”威尔·特纳（奥兰多·布鲁姆 Orlando Bloom 饰），却在百慕大三角遭遇被解封的亡灵萨拉查船长（哈维尔·巴登 Javier Bardem 饰）。获取自由的萨拉查屠尽加勒比海盗，征服了整个海域，手刃了“黑胡子”爱德华·蒂奇（伊恩·麦柯肖恩 Ian McShane 饰）的里海海盗王赫克托·巴博萨船长（杰弗里·拉什 Geoffrey Rush 饰）在女巫Haifaa Meni(格什菲·法拉哈尼 Golshifteh Farahani 饰)口中得知了萨拉查的真实目的：为寻找他的宿敌杰克船长（约翰尼·德普 Johnny Depp 饰）。海盗的命运皆压在落魄的老杰克被封印的黑珍珠号，以及天文学家卡琳娜·史密斯（卡雅·斯考达里奥 Kaya Scodelario 饰）口中的远古三叉戟上。hahahahahahahahhahahahahahahahahahhaha故事发生在《加勒比海盗3：世界的尽头》沉船湾之战20年后。 男孩亨利（布兰顿·思怀兹 Brenton Thwaites 饰）随英国海军出航寻找被聚魂棺诅咒的父亲“深海阎王”威尔·特纳（奥兰多·布鲁姆 Orlando Bloom 饰），却在百慕大三角遭遇被解封的亡灵萨拉查船长（哈维尔·巴登 Javier Bardem 饰）。获取自由的萨拉查屠尽加勒比海盗，征服了整个海域，手刃了“黑胡子”爱德华·蒂奇（伊恩·麦柯肖恩 Ian McShane 饰）的里海海盗王赫克托·巴博萨船长（杰弗里·拉什 Geoffrey Rush 饰）在女巫Haifaa Meni(格什菲·法拉哈尼 Golshifteh Farahani 饰)口中得知了萨拉查的真实目的：为寻找他的宿敌杰克船长（约翰尼·德普 Johnny Depp 饰）。海盗的命运皆压在落魄的老杰克被封印的黑珍珠号，以及天文学家卡琳娜·史密斯（卡雅·斯考达里奥 Kaya Scodelario 饰）口中的远古三叉戟上。hahahahahahahahhahahahahahahahahahhaha故事发生在《加勒比海盗3：世界的尽头》沉船湾之战20年后。 男孩亨利（布兰顿·思怀兹 Brenton Thwaites 饰）随英国海军出航寻找被聚魂棺诅咒的父亲“深海阎王”威尔·特纳（奥兰多·布鲁姆 Orlando Bloom 饰），却在百慕大三角遭遇被解封的亡灵萨拉查船长（哈维尔·巴登 Javier Bardem 饰）。获取自由的萨拉查屠尽加勒比海盗，征服了整个海域，手刃了“黑胡子”爱德华·蒂奇（伊恩·麦柯肖恩 Ian McShane 饰）的里海海盗王赫克托·巴博萨船长（杰弗里·拉什 Geoffrey Rush 饰）在女巫Haifaa Meni(格什菲·法拉哈尼 Golshifteh Farahani 饰)口中得知了萨拉查的真实目的：为寻找他的宿敌杰克船长（约翰尼·德普 Johnny Depp 饰）。海盗的命运皆压在落魄的老杰克被封印的黑珍珠号，以及天文学家卡琳娜·史密斯（卡雅·斯考达里奥 Kaya Scodelario 饰）口中的远古三叉戟上。hahahahahahahahhahahahahahahahahahhaha故事发生在《加勒比海盗3：世界的尽头》沉船湾之战20年后。 男孩亨利（布兰顿·思怀兹 Brenton Thwaites 饰）随英国海军出航寻找被聚魂棺诅咒的父亲“深海阎王”威尔·特纳（奥兰多·布鲁姆 Orlando Bloom 饰），却在百慕大三角遭遇被解封的亡灵萨拉查船长（哈维尔·巴登 Javier Bardem 饰）。获取自由的萨拉查屠尽加勒比海盗，征服了整个海域，手刃了“黑胡子”爱德华·蒂奇（伊恩·麦柯肖恩 Ian McShane 饰）的里海海盗王赫克托·巴博萨船长（杰弗里·拉什 Geoffrey Rush 饰）在女巫Haifaa Meni(格什菲·法拉哈尼 Golshifteh Farahani 饰)口中得知了萨拉查的真实目的：为寻找他的宿敌杰克船长（约翰尼·德普 Johnny Depp 饰）。海盗的命运皆压在落魄的老杰克被封印的黑珍珠号，以及天文学家卡琳娜·史密斯（卡雅·斯考达里奥 Kaya Scodelario 饰）口中的远古三叉戟上。</div>
			</div>
			<div id="right">
				<span id="up"></span>
				<div id="slider"></div>
				<span id="down"></span>
			</div>
		</div>
	<script>
		var out=document.getElementById("out");
		var text=document.getElementById("text");
		var content=document.getElementById("content");
		var right=document.getElementById("right");
		var up=document.getElementById("up");
		var down=document.getElementById("down");
		var slider=document.getElementById("slider");
		//计算滑块定位top的最小值和最大值
		var minTop=up.offsetHeight;
		var maxTop=right.clientHeight-slider.offsetHeight-down.offsetHeight;
		
		
		//拖拽滑块，内容跟着滚动
		slider.onmousedown=function(ev){
			slider.style.background='dodgerblue';
			var disY=ev.clientY-slider.offsetTop;
			
			document.onmousemove=function(ev){
				var t=ev.clientY-disY;
				scale(t);
			}
			document.onmouseup=function(){
				slider.style.background='lightskyblue';
				document.onmousemove=null;
			}
			//阻止事件冒泡，使得按下right中的slider时不执行right.onmousedown的事件
			ev.cancelBubble=true;			
			return false;
		}
		
		
		//滚动滚轮，内容以及滑块跟着滚动
		out.onmousewheel=function(ev){
			var t=slider.offsetTop;
			var step=8;
			t=ev.wheelDelta<0?t+step:t-step;
			scale(t);
		}
		
		
		//滑块区域被按下，滑块的中心滚动到鼠标按下的位置
		right.onmousedown=function(ev){
			var timer;
			var step=8;
			timer=setInterval(function(){
				var t=slider.offsetTop;
				var aimTop=ev.clientY-right.offsetTop-0.5*slider.offsetHeight;		//slider.top的目标终点
				
				if(t<aimTop){
					t+=step;
					t=t>aimTop?aimTop:t;
				}else if(t>aimTop){
					t-=step;
					t=t<aimTop?aimTop:t;
				}else{
					clearInterval(timer);
				}
				scale(t);
			},16);
			
			right.onmouseup=function(){
				clearInterval(timer);
			}
			return false;
		}


		//给上下箭头添加mousedown事件
		up.onmousedown=function(ev){
			arrow(up,ev);
			return false;
		}
		down.onmousedown=function(ev){
			arrow(down,ev);
			return false;
		}
		
		function arrow(obj,event){
			obj.style.background='orangered';
			var timer;
			var step=2;
			
			timer=setInterval(function(){
				var t=slider.offsetTop;
				t=obj==up?t-step:t+step;
				scale(t);
			},32);

			//按住上下箭头后若鼠标移出obj则停止移动，鼠标再次移入obj时再次移动			
			obj.onmouseleave=function(){
				clearInterval(timer);
			}
			obj.onmouseenter=function(){
				timer=setInterval(function(){
					var t=slider.offsetTop;
					t=obj==up?t-step:t+step;
					scale(t);
				},32);
			}

			document.onmouseup=function(){
				clearInterval(timer);
				obj.onmouseenter=null;
				obj.style.background='indianred';
			}
			event.cancelBubble=true;		//点击上下箭头时需要阻止事件冒泡
		}
		
		
		function scale(t){
				t=t>maxTop?maxTop:t;
				t=t<minTop?minTop:t;
				
				//算scale时一定要减去up.offsetHeight!!!
				var scale=(t-up.offsetHeight)/(maxTop-up.offsetHeight);	
				content.style.top=scale*(text.clientHeight-content.offsetHeight)+'px';
				slider.style.top=t+'px';
		}
	</script>
	</body>
</html>
